<div ng-controller="Umbraco.PropertyEditors.GridPrevalueEditorController as vm">
    <div class="grid-layout">
        <div class="control-group">

            <h4>
                <localize key="grid_gridLayouts">
                    Grid Layouts
                </localize>
            </h4>
            <p>
                <localize key="grid_gridLayoutsDetail">Layouts are the overall work area for the grid editor, usually you only need one or two different layouts</localize>
            </p>

            <ul class="unstyled"
                ui-sortable
                ng-model="model.value.templates">

                <li ng-repeat="template in model.value.templates" 
                    class="flex items-center mb2" 
                    ng-class="{ mb0 : $last }">

                    <button type="button" ng-click="vm.configureTemplate(template)" class="btn-reset umb-grid-preview--rows mr3" aria-label="Edit grid layout">
                        <span class="umb-grid-preview--row">
                            <span class="umb-grid-preview--col umb-grid-preview--col__deep"                                 
                                 ng-repeat="section in template.sections | filter: vm.zeroWidthFilter"
                                 ng-style="{width: vm.percentage(section.grid) + '%'}">
                            </span>
                        </span>
                    </button>

                    <p class="mb0">{{template.name}}</p>
                    <button type="button" class="btn-icon" ng-click="vm.deleteTemplate($index)" aria-label="Delete">
                        <umb-icon icon="icon-trash"></umb-icon>
                    </button>
                </li>
            </ul>

            <button type="button" class="btn btn-info" ng-click="vm.configureTemplate()">
                <localize key="grid_addGridLayout" />
            </button>
        </div>
    </div>
    <div class="grid-layout">

        <div class="control-group">

            <h4>
                <localize key="grid_rowConfigurations">Row Configurations</localize>
            </h4>
            <p>
                <localize key="grid_rowConfigurationsDetail">Rows are predefined cells arranged horizontally</localize>
            </p>

            <div class="control-group">
                <ul class="unstyled"
                    ui-sortable
                    ng-model="model.value.layouts">

                    <li ng-repeat="layout in model.value.layouts" 
                        class="flex items-center mb2" 
                        ng-class="{ mb0: $last }">                       

                        <button type="button" ng-click="vm.configureLayout(layout)" class="btn-reset umb-grid-preview--rows mr3" aria-label="Edit row configuration">
                            <span class="umb-grid-preview--row">
                                <span class="umb-grid-preview--col"                                     
                                     ng-repeat="area in layout.areas | filter: vm.zeroWidthFilter"
                                     ng-style="{width: vm.percentage(area.grid) + '%', 'max-width': '100%'}">

                                    <span ng-show="area.maxItems > 0" class="umb-grid-preview--col__text">{{area.maxItems}}</span>
                                </span>
                            </span>
                        </button>               

                        <p class="mb0">
                            {{layout.label || layout.name}}
                        </p>

                        <button type="button" class="btn-icon" ng-click="vm.deleteLayout(layout, $index, $event)" aria-label="Remove">
                            <umb-icon icon="icon-trash"></umb-icon>
                        </button>
                    </li>
                </ul>

                <button type="button" class="btn btn-info" ng-click="vm.configureLayout()">
                    <localize key="grid_addRowConfiguration">Add row configuration</localize>
                </button>

            </div>
        </div>

    </div>


    <div class="grid-layout">

        <umb-control-group label="@grid_columns"
                           description="@grid_columnsDetails">
            <input type="number" min="1" ng-model="model.value.columns" />
        </umb-control-group>

        <umb-control-group label="@grid_settings"
                           description="@grid_settingsDetails">

            <ul class="unstyled umb-contentpicker"
                ui-sortable
                ng-model="model.value.config">

                <li ng-repeat="configValue in model.value.config">
                    {{configValue.label}}

                    <umb-icon icon="icon-navigation" class="handle ml2"></umb-icon>

                    <button type="button" class="btn-icon" ng-click="vm.removeConfigValue(model.value.config, $index)" aria-label="Remove">
                        <umb-icon icon="icon-trash"></umb-icon>                       
                    </button>
                </li>
            </ul>

            <ul class="unstyled">
                <li>                    
                    <button type="button" ng-click="vm.editConfig()" class="btn btn-info">
                        <localize key="general_edit">Edit</localize>
                    </button>
                </li>
            </ul>
        </umb-control-group>
         

        <umb-control-group label="@grid_styles"
                           description="@grid_stylesDetails">

            <ul class="unstyled umb-contentpicker"
                ui-sortable
                ng-model="model.value.styles">

                <li ng-repeat="style in model.value.styles">
                    {{style.label}}

                    <umb-icon icon="icon-navigation" class="handle ml2"></umb-icon>

                    <button type="button" class="btn-icon" ng-click="vm.removeConfigValue(model.value.styles, $index)" aria-label="Remove">
                        <umb-icon icon="icon-trash"></umb-icon>
                    </button>
                </li>
            </ul>

            <ul class="unstyled">
                <li>                    
                    <button type="button" ng-click="vm.editStyles()" class="btn btn-info">
                        <localize key="general_edit">Edit</localize>
                    </button>
                </li>
            </ul>
        </umb-control-group>
    </div>

</div>
